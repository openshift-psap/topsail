# Run Ansible lint in playbooks and roles
name: Run the duplicate-code check

# Controls when the action will run.
on:
- issue_comment
- push

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  duplicate-code-check:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest
    if: github.event.issue.pull_request && contains(github.event.comment.body, '/run duplicate-code-check')

    steps:
    # Important: This sets up your GITHUB_WORKSPACE environment variable
    - uses: actions/checkout@v3

    - name: Duplicate code detection tool
      uses: platisd/duplicate-code-detection-tool@v1.2.0
      with:
        directories: "projects/"
